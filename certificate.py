from reportlab.pdfgen import canvas
from reportlab.lib.pagesizes import A3
from reportlab.pdfbase.ttfonts import TTFont
from reportlab.pdfbase import pdfmetrics
from bidi.algorithm import get_display
import arabic_reshaper
import jdatetime
import io
from PIL import Image

def reshape_text(text):
    return get_display(arabic_reshaper.reshape(text))

def create_medical_certificate(first_name, last_name, sick_days, signature_data):
    # ثبت فونت فارسی
    pdfmetrics.registerFont(TTFont('IRANSans', 'IRANSans.ttf'))
    
    # ایجاد نام فایل
    file_name = f'{first_name}_{last_name}_certificate.pdf'
    
    # تنظیمات صفحه
    c = canvas.Canvas(file_name, pagesize=A3)
    width, height = A3
    
    # حاشیه
    margin = 50
    
    # رسم حاشیه
    c.setLineWidth(3)
    c.rect(margin, margin, width - 2*margin, height - 2*margin)
    
    # تنظیم فونت
    c.setFont('IRANSans', 16)
    
    # عنوان
    title = reshape_text("گواهی استعلاجی")
    c.drawCentredString(width / 2, height - margin - 30, title)
    
    # اطلاعات شخصی
    first_name_text = reshape_text(f"نام: {first_name}")
    last_name_text = reshape_text(f"نام خانوادگی: {last_name}")
    date_text = reshape_text(f"تاریخ: {jdatetime.date.today().strftime('%Y/%m/%d')}")
    sick_days_text = reshape_text(f"تعداد روزهای استعلاجی: {sick_days}")
    doctor_text = reshape_text("نام پزشک: دکتر احمدی")
    stamp_text = reshape_text("مهر:")
    additional_info = reshape_text("این گواهی جهت تایید مرخصی استعلاجی صادر شده است.")
    
    # چاپ از راست به چپ
    text_objects = [
        first_name_text, last_name_text, date_text,
        sick_days_text, additional_info,
        doctor_text, stamp_text
    ]
    
    y_positions = [
        height - margin - 70, height - margin - 100, height - margin - 130,
        height - margin - 160, height - margin - 200,
        height - margin - 240, height - margin - 270
    ]
    
    for text, y in zip(text_objects, y_positions):
        text_width = c.stringWidth(text, 'IRANSans', 16)
        c.drawString(width - text_width - margin - 10, y, text)
    
    # اضافه کردن امضا
    with Image.open(io.BytesIO(signature_data)) as img:
        temp_path = "temp_signature.jpg"
        img.save(temp_path)
        # محاسبه موقعیت برای قرار دادن امضا در وسط
        signature_width = 150
        signature_height = 50
        signature_x = (width - signature_width) / 2
        signature_y = height - margin - 350  # تنظیم ارتفاع برای بالاتر بردن امضا
        c.drawImage(temp_path, signature_x, signature_y, width=signature_width, height=signature_height)

    # پایان و ذخیره فایل
    c.save()
    print(f"فایل {file_name} با موفقیت ایجاد شد.")



# داده باینری تصویر امضا
signature_data = b'\xff\xd8\xff\xe0\x00\x10JFIF\x00\x01\x01\x00\x00\x01\x00\x01\x00\x00\xff\xdb\x00\x84\x00\t\x06\x07\x12\x13\x12\x15\x13\x12\x13\x15\x15\x15\x15\x15\x15\x15\x16\x15\x15\x18\x15\x15\x15\x15\x15\x15\x15\x16\x16\x15\x15\x15\x15\x18\x1d( \x18\x1a%\x1d\x15\x15!1!%)+...\x17\x1f383,7(-.+\x01\n\n\n\x0e\r\x0e\x1b\x10\x10\x1b-% %--------------------------------------------------\xff\xc0\x00\x11\x08\x00\xb7\x01\x13\x03\x01"\x00\x02\x11\x01\x03\x11\x01\xff\xc4\x00\x1c\x00\x00\x01\x05\x01\x01\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x05\x02\x03\x04\x06\x07\x00\x01\x08\xff\xc4\x00A\x10\x00\x01\x03\x02\x03\x05\x04\x07\x06\x05\x03\x04\x03\x00\x00\x00\x01\x00\x02\x03\x04\x11\x05!1\x06\x12\x13AQ"aq\x81\x07\x142R\x91\xa1\xb1Bbr\xc1\xd1\xf0#3\x82\xb2\xe1C\x92\xc2\x15cs\xa2\x16\x17S\xff\xc4\x00\x1a\x01\x00\x03\x01\x01\x01\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x01\x02\x03\x04\x00\x05\x06\xff\xc4\x00\'\x11\x00\x03\x00\x02\x02\x02\x02\x02\x03\x00\x03\x01\x00\x00\x00\x00\x00\x01\x02\x03\x11\x12!\x041\x13A"Q\x14aqR\xc1\xe12\xff\xda\x00\x0c\x03\x01\x00\x02\x11\x03\x11\x00?\x00\xa7H\xf2\xe7w)\x14\xd0\xaedy\xa9\xb12\xc1b_\x936zD~\x08\xbaP\x8f;\xa9QE\xad\xd4j\xa9\x03ZUei\x93\xa6O\xc3M\xeeUsj\xf1 \x1e\xd8\x99\xd6\xe5\x16\xc3*m\x0b\x9ez\x15Dt\x86I\\\xfe\xae6[\xb1\xde\x96\x91\x96\xe7\xf6\x1e\xa6\xaf \x8b\xab\xe6\x07X\xd7\xb0\x0b\xe6\xb3V<\x82\x01\x1eh\xf5\x05V\xeb\x80i\xb5\xb5Z\xa6\x99\x92\xa5\x05qx\xf8s\x83\xc8\xa8x\xd58#\x882=\xc9\xad\xa3\xab%\xadwK"\x18<\xad\x9a"\xd3\xad\x92\xe6\x95\x92t\xc6\xc3O\x1dm\r`\x15\xf7sZI\xb8\xe7\xdc\xb5\x8c\x01\xc3/\xa2\xc4\xf0\xeb\xc7S\xb8y;.\xf0V\xed\xb2\xb4\xa04\x17t^*\x86\xabL\xf6]\xa7*\x90r6o\x02\xd2\x12a\xa6\xb2\x9c\x18\x17\x16\xab\xf03\xfc\x9f\xa2\xbd\x8f\xe1\xdb\xec"\xdc\xb2\xf1Tm\xe2\xd3c\xcb#\xe4\xb5i\xe3\xb8T\x9d\xaa\xc2\x88<f\x8f\xc6?5\xd2\xf8=\x02\xbf5\xbf\xb4\x04\x13\x02\xbd2(\xa1\xc1z\x1e\xab\xc8\x86\x89l\x96\xca]=J\x17\xc4\t\xd6\xbb\xa2\xe5G4X`\x9dK\x86\xa8\xa0\x11T\xd8)1\xd4*&#E\x9a9C\x85\x8eh.;\xb3pT4\xb5\xeci\xbfP\x17\x94\xd5$"qOt\xc9\x8a\xd1\x89\xed/\xa2\xf7\xc6K\xa9\xcd\xc7\xb8\xef\xf8\x9f\xd5T\x86\x01 ;\xaeii\x1a\x82\xbe\x9a\x92\xc7\\\xd0|S\x04\x8aNB\xff\x005,\x98\xf6\xb7%q\xe4\xd7Tat\xfb<y\x84B-\x9f\xb7%\xa1\xd5`\xdc>W\x08t\xa5\xab\x05U\'\xa6m\x95-m\x15\xda\\?u{Z,\x119\x1c\x84\xe2\x12ee\xd5]\x1c\x97`)\x1bs\x9aC\xe9\x81E#\xa1.R\xe1\xc3\xbb\x94\xf7\xa2\x85F|<\x9eI\xa6a\xa5]\x9f\x86\xf7&\x1dCd\xdf+\x07\x04U\xc6\x1c\xbdVOU\\\x97\xe4a\xe2\x89\x94\xb0\xefd\x896\x97/\x04\xf5\x1d-\x87\x8avl\x9aV\xfcx\xf4\xbb3\xd5\xed\x83\xa7\xcb4 \x9e&\xf0\x1c\x93\xf8\xbd]\x81P0{\xee\x93\xd74\x94\xf4r\xec\xea\xb9xt\xae\x1eJ\xa9GNI\x06\xf6\xe6\x8em%V\xe4m\x1dJ\xad\xc7T\xfeJ\x92\xde\xba%~\xcbM\x1e\xe8\xf6\xb3O\xbd\xad\xd4*\xc4x\xab\xda{B\xea\xcb\x83\xe2\x90\xc87N\xa5ZsT\xfb#X\x93\x0bGA\xc6\x87\xaa\x8f\x80\xe1\xb3E&\x84\x8e\x8a\xc1\x80\xb1\xac\x05\xbdt\xf3S\\\x0c`\x91b\xb7K\x97;fJT\xabH\x11.\x1a\x1fW\x03\xadn\xd7k\xc0\x02\x7f%\xaf\xe1U\x02\xc3\xa2\xc9c\xad.\x90?M\xc3\xf2*\xe1A\x8aZ\xd9\xaf\'\xc9i^\xcfW\xc6\x96\xe3F\x91\x14\x80\xa7\tU\n<l\x0eh\xdc\x18\xcb\x08\xcc\xa5\x9c\xb2\xc3XZ\xf4\x12LTF\x1c\x08<\xd4S\x8bG\xc8\xdd3S\\,H(VI\x0c\xe3\xad\x94}\xa6\xc0\x9fN\xf2\xf6\x82bq\xc8\x8f\xb0}\xd3\xd0tA\xc4\xc2\xd9\xad\'\x0e\xc5\x193\\\xd7X\xe6X\xe6\x9c\xc7B\x08<\xbfUI\xdbM\x9dt\x17\x9a\x1b\x98I\xccs\x8c\x9f\xf8\xf7\xf2K4\x9a\xe8\x15\x8d\xcb\xec\x14\xd9\x01O2\\\xd0ziT\xe6\xba\xca\x92\xc94\x10t\xd7OB\xf2\x84\x87\x95.:\x8bj\xaa\xa8F\x83\x11\xd4)\x94\xd5\x96@\xe2\x99>\xd7\xaalF\x8bLU\x01\xc1"c\xd1\x02\xa4\xac\xb1\xb2+\x1dE\xd3&+B\xcb\xc1\x16r\t\x8a\xe0A\xfd\xa6d~^h\xcb\x88*;\xde[\xe0\x96\xa5W\xb1\xa6\x9c\xfa(\xf5\xb4O\x8f\'\x0f\xd1\x04t[\xd2\x00\xb4\xe9\xd8\xc9E\x88\n\xbc\xfd\x9c\xddyss\x1d?E\x876\x06\xbb\x93V,\xc9\xf4\xc8\x94T\x19h\xa4\x9a@\x118\xa1\xb0\xd17#VF_`\xb9)\xd4\ti\xd1\xa7\xb5F\x964\x8d\x94@\x7fW\\\x88\x18\xd7!\xb0\x92\xdc,\x10LF\xb2\xd9\x02\x91\x88b\xfb\xc4\x86\xe9\xc9\n.$\xdc\xaff\xedzF\x14\x81\xd8\xbc\x84\x809\x92\x89Q\xc7\xbb\x16z\x9c\x94\x08!\xe2\xcd\xf7[\xf5Egp\xbeZ0\\\xac\xcc\xa2*\xbbW /c=\xd1\x9a\x06\x0f \x9f\xc4*\xb8\x92\xbd\xddM\x87\x82\xf2\x08s\xcfR\xaf+H\x8d=\xb1P\x0b\x9c\xc2\x94\xc9\x1d\x0b\xc4\x91\x1d\xd29\xd8x\xf3\xf0N\xc7\x00h\xb9Q\xaa\x9c,<S\x01{.\xd8\x0e\xdc1\xb9TQ\xc3(:\xbd\x9b\xd1\xb8w\xb5\xb7\xb0>\x04+<8\x9e\x1bR-\x1dK\xa9\x9c\x7f\xd3\x9co6\xfd\x03\xb2?U\x93\xe1\x94\xe5\xee\r\x04\x0b\xf3:)\xf5\xb8l\xd1{l6\xea;A^]k\xa2u\x13\xb2\xfb[\xb3\x15Q\x92\xf64M\x1e\xe9\xed@\xee\'\xc5\xa3\xb5\xf2J\xc2\xaa\xb7\x99\x9eNi\xddp9\x10GPtY\xfe\x1f\x8d\xcf\x01\xfe\x14\xb23\xb9\xae;\xbf\xed9)U\x1bK<\x8e\xdft\xbd\xbd.@7\xf1\xe7\xf3Ysc\xe7\xd9\xa7\x06N\x0bE\xf8\xd49\xa6\xf7\xe8\x8b\xe1\x98\x8d\xc8\xba\xce\xe8\xf6\xa88\x01(\x00\xfb\xcd=\x93\xe3\xcd\xa8\xf6\x1dT\r\x8bM\xc1\xd2\xd9\x85\xe6\xe4\x8a\x87\xb3\xd4\xc7s\x91\x1ae,\xad<\xb5R_\x00sH\xd1\x04\xc1*\xc1\x00\x12\x8f\x89\x80\xfdn\xa9-R!I\xa6Qi+\x9c\xca\x99\xdb\xcd\xa5\x80\xfe ,O\xc0\x05l\xa0\xc5\xb7\x81k\xecA\x16 \xe6\x08:\x829\xa0[OD\xd6\xcajYo\xe2\x00\xd9?\x1bE\x98\xef1\x97\xf4\x84\xc6\x1b0\xf9\x05\x99[\x8a\xd1\xa5\xc2\xb8\xd9\x17j6{\x80x\xd1g\x0b\x8e\x9a\xf0\xc9\xe4~\xefC\xe4\x80\xfa\xd5\xf2Zu\x05M\xc6\xeb\x86\xf3H\xdd \xe6\x08\xe6\x08T\xad\xa8\xc0\x1b\x03\xc4\x91\x7f)\xe7Oq\xde\xed\xfake\xe8FM\xa3\xcd\xc9\x89\xcb\x07E=\x92\xcc\xd7P\xdc\x9b\xe2\xd9U2\x1a\x08\xc7!\n|57A\x19:pTtL\xa8V\x83\x81\xea]5Y\x05\x02\x8a\xa9;\xebJ\x9c\x84\xe2Z\x995\xd2\x9d\'$\x12\x82\xb1O{\xef\x98O\xb1\x1a=\x9d\x84f\x12`\xad \xd9\xcb\x99T4)30\x1d\x11\xf6\x00\x88\x0c\x90d\xa1UQ\x91\xde\xa1v\x98n\xd4J\x93\x11\x0e\xc9\xda\xa8\xe4\xf1\xe2\xff\x00\xd2\xb1\x9a\xa4\x16\xe6\xa6^\xd4~\xa6\x8c8\\ \x951\x16\x9c\xd7\x9d\x9b\xc6\xbc}\xfd\x1bqf\x9b"\x96.K\xba\xe5\x9c\xb1LlvQ\xeb%\xb0\xb0\xd4\xe4\x14\x82\xfc\xb3^\xe1\xb4\xdb\xc7\x88\xed\x06\x8b\xd3FFtq\x88"\xfb\xc7\xeaP\x9d\xa0\xab1\xc3\xba\x0fi\xfa\xf9\xa2\x13N\xd79\xcf>\xc3>\xaa\xa1UPf\x90\xb8\xe9|\xbc\x11S\xc9\x8a\xebH\x8fM\r\xb5Dh\xb1\x1e\x13\x9c\xc70>7n\xef\xb0\xe4M\xb4s\x1f\xab\x1e/\x91\xd3\xa8!&8\x90\xea\xa7\x9d\xf7[\xaf\xd1Q\x89)\x1a\x15V\xd9A\x1b[\xbd\x86\xd3I\x01\xc9\x8e\r\x88\xe9\xab_x\xb7\x83\xc70I=\xe4f\xa2;kpw\xff\x003\th\xff\x00\xc6\xe73\xfb$j\xa6P\xe2\x0e\x8c\x90@s\x1d\xed\xb0\xe8\xe04\xccf\xd7\x0eN\x19\x8f\x92r\xae\x12\x1b\xc4\x8c\xef\xc5{v\x83K\xd8}\xd9\x05\xb2=\x08\xc8\xfc\x87\x1d\xa4^\xb0\xad\xa2\xc0\x19 x\xa3\xa8\x8c\x8d;o{E\xf2\xbd\x9c\xf7]\x1fv\xd5\xe0rd\xe7\xcc\xc2y\x86\x91\xf1\x01\x96X\xd0\x99\xbc\xd8\xdf G\xd0\xa57\x86y\x11\xe0\x7fP\x8f&\x8e\xe0\x99\xa9\xd6R`\x92\x8c\xab\xed\xf8\xe2\xcf\xe2\x1c\xd2\x84Vlm\x13\xbf\x91\x8b\xd2_\xdd\x93}\xbf1uG\x10\xb3\xdew\xc8\xfe\x89B\x01\xc9\xe7\xcc~\x85+\xbd\x8c\xb1\x07j\xf6:V\xe9WE\'\xe0\x9e\xdf\xde\xd6\xa7p\x18\xeai\xde\x1a\xf0\xd7DN\xac\x927\xee\x93\xccn\xba\xf6\xba\xae\x88O\xbc\xdf\xfd\x87\xe4\x9a\x94\x11\x9eD\xf5\x19\xa9\xd2\xe6\xb4V\x1f\x07\xc9\x1bE%Ia\xf1V\x8a\n\xc6\xb8f~\x16Y\xbe\t\x8a\x99bc\xdf`H\xce\xddFH\xdc5#\xaa\xf2\x9bx\xe8\xf5\xf8\xac\x93\xb2\xedZ\x1b$Oe\x89\xdei\x00\xdc\x1b\x1f\xb2r\xef\xb2\xa2Qb\x96qk\xae\x1c\x0e\xe9i\xc8\x822 \xdfE>*\xebh\xa8\xa3h\x1d\xebo\x86\xa6&\x97q\\\xc6Mm\xc9X\x0b\xbf\x86^FR\xb2\xdb\xbe\xd0\xbd\x8eER\'\xe7\xdf\xed\x11\xab\xf85\xbfL\xd5\xb0\x9a\xbb\xda\xe4x#u\x94\xb1\xcf\x19\x8c\xfd\xa1\xf0<\x88\xf0Y\xe6\x13\x89\xe6\xad\xd8-e\xcd\x97b\xb7/Ll\xb8\xd5-\x94Z\xdaw\xc5#\xa3x\xb3\x9alG\xd0\x8e\xe23Pe\x95j{Y\x80\x8a\x98\xb7\x99a3\x07d\xe9\xbe9\xb0\xfe_\xe5d\x15\x0f \x90n\x08$\x10u\x04dA[\xd3<\xba\x9d2C&\xcdIiCX\xe56\x19\xc5\xac\x9bb\xe8}\x92\'\x1f=\x86\xa8mL\x96\xd10\xd9I]\xb0h)\x1e\'b\x8d\xe1\xd8\xbd\xf2%Sdr\xe8jKN\xa9\xa6\xf4\xc1Q\xb2\xff\x001\xb8\xb8L\xd3\xd7\xdb"\x82\xe1\xd8\xb7"\xa6\xccA\xcc-\n\x93\xed\x10s\xae\x98lU\x02\x98\x9c\xf3\x08\x08\xa8 \xa9Q\xd7uG\x92b\xf1\xd0v\x83\x16-;\xae\xf8\xa2r\x86\xbc*|\x93\x02\xa4RbE\xb9]7O\xa6\r5\xda\nIA\x9eK\x977\x15\x1c\xd7(\x7f\x17\x19_\xe4Y\x9b\x80dv\xe8\xd0{I\xccB\xb3Hc\xe7\xa9\xe8\x13\x13T\xee\r\xc6k\xcc\xf7\xa85\x95\\&\x93\xab\xdd\xa7r\x82\x7fH\xd0\xc8\xb8\xe5P\xca\x16\x1c\x87\xb4z\xa8P\xc7\xd1"&\x9dNd\xe6JrG\xd8-S<V\x8c\xed\xed\x8eqr\xb2\x10\xf7f|J\x90\xe9\x142R\xd2\x1e\x0fJ\x91AX\xe8\x9d\xbc\xcf\x02\x0emsN\xadp:\x82\xa3.\tG,\xf2`Q\xd4\xc7\xc5\xa3\xc9\xff\x00j\x9c\xf5\xe7\xc3\'\xfbO\\\x8f%]\x10\x90lFb\xe0\x83\x91\x04j\x08\xe4\xa5\xe0\xd8\x93\xa0\x908\x1c\x8eN\x1d\xdd|U\xbb\x1b\xc3\x19V\xce4V\x13\xd8d,\x04\xa0\rO\xde\xd3?\x8a\xefg.\x8aH\x07\xa1J\x05%\xb3\x16\x9b8\x10FD\x1eJCd\x05M\xed\x16\x9d1\x00]1"\x91\x92i\xed\x1d\x17&u.\x8b6\xc6T\x02\xc7Fui\xde\x1e\x0e\xff\x00?Un\x0c:,\xb2\x82\xb1\xd0\xc8\x1e\xdeZ\x8e\xa3\x98[&\xceV\xb2h\xd9#H\xb1\x16\xef\x04r+\x0f\x95\x8fU\xbf\xa6z\x1e&T\xe3\x8f\xda\x18l\x12[x4\xdb\x99\xb6\x9d\xea\xa7[4R\xd4\xc9\x1dQs82q#\x99\x9b\xbb\xe20\xf0_\x19\x0e\xc9\xe3\xda-\xe6\x08#1\x92\xd6\xdaZZA9\x11o\x8a\xc4*\xaa\x01|\xb4\xf2\xb8]\x93K\xc2\x98\xfd\x82d;\xcd}\xb5\x89\xda\x9ft\xe7\xa5\xc1>\x1cj\x9bO\xe8\x8f\x99[I5\xf6Y\xf6\x8e\x9d\xd4r4\xb1\xdb\xf0\xcf\xdb\x86Q\xec\xbd\xa73\xe0GEi\xd9\xba\xd0\x007Y\xe6\x13\x8b\x98C\xe8\xeb\x1a\xf3N\xe3\x9bE\x8b\xe0\x97"\xd9\xe0\'+\xe6\t\x1a8\x1e\xf0U\x8e\x87z\x075\xa5\xcd{\x1c\xdd\xf8\xe4o\xb1,gG\xb0\xfc\x889\xb4\x82\nl\xf8\xb5\xf9H\xde>nK\x85?\xfd5j*\x9e`\xea\xa8\xbe\x920`\xd7z\xd3\x07e\xf6\x12[\x93\xf4\x0e\xf3\xd3\xc6\xddT\xfc?\x18\r\xb6z\xe5nh\xbe!3d\x89\xccx\xbb\x1e\xd2\xd2;\x8f\xee\xe9q\xe5K\xd83a\xdf\xa3\x1a\x92d\xaay\x13U\x11n=\xcc&\xfb\xae-\xbf[\x1b]!\xb2\x00\xb6$y\xe1W\x9c\x94S*\xf1\x93d\xa2\xca\xfb\x14\x1a\n%>K\xa8\xcez@\x91y"\x01$CSdZ\x8f\x11:\x15[\x05I\x85\xc5\x14\xdc\x8a\xd6\xcb\x1c\xb3\x82\x983\x947\xd6,\xb8\xd5\x02\x9b\x988\x04Mi\tB\xbd\x06\x92d\xc9\x9d\x1f\x90\x1f\x19`\xff\x00\xa9\xf7\xaf\x15{\x8c\xb9\x1f\x94\x1f\x11,\x06\xb4\x17\xbbA\xa7yU\xd9\xa52<\xb8\xf9w\x05\'\x17\xc47\xdd\xba=\x80\xa2\x17\xb4\x04\xd8\xa3\x8fl\xec\x95\xbe\x91 \xc8\x1a\x10\xe9g$\xa4\xcb%\xcal\x15F\xc9\xe8Q)\xb2\x9cxM\xa4oe%\x1c\xbd]e\xed\x90\x18\xf1Y\xf6S\x12"\xf1\x93\xa6m\xce\xd9}\xa1\xfb\xfc\x95j\xc9\xcai\x8b\x1e\xd7\x8dZo\xfe\x10aE\xbbi\xf0\xb6K\xfcV\xea@\xb9\x02\xd7<\x89\x1d\x7fEN{\x1c\xc3b\xaft\xd3\x876\xd7;\xaf\x17\x1d\xe3\xbf\xc3/\x81A1*Ar\x08\xd1M\xde\x9f\xf4Rc\x92\xfe\xd0\r\xb2/\x1c\xf5\xd2BZ{\x93n)\x92O\xd0\x1bk\xd9\xe3\x94\xfc\x1b\x1b\x9e\x98\x93\x13\xec\x0e\xad9\xb4\xf9uC\xc2\xf4\xb13I\xad1Si\xed\x16Z\xbd\xbb\xabp\xb0-e\xc5\xae\xd0o\xe5r\xab\xb7\'2s\xd6\xe7[\x94\xc1R#\xcc%X\xe6\x17\xe2\x86\xf9+#\xfc\x98b\x82A3828\x074Z\'\x9c\xf7u\xb3\x1cyDt\xbf\xd8\'\xdd%N\xd9\xfcg\x80]KT\x1c!/76%\xf4\xd3{&V\x81\x99\x1c\x9c\xcf\xb4\x06Y\x80\xab\xb1\xba\xc7\xf7\xf0F1\xa8\xf8\x94\xd1U\x01\xdak\x84\x12\x1c\xae\xf0Z]\x13\x8d\xb9\xf6%fy\xee\xc6\xc3\xcd7\xff\x00D\xde\xe5\xed\x1a\x16\xcda\xf21\xee\xe2\xd8\xbc\x1dA\xdei\x076\xb9\x87\xed4\x8b\x10z\x15m\x94v,Vm\xe8\xd3j@s)\'"\xdaS\xbd\xd9X\x93\xfc\x82O"I-\xe8I\x1fk-&\xb5\xf6\x02\xdf\x9d\xfek\xce\xf21\xf0\xec\xf4\xb0\xe5\xf9\x11\x90bN\x1cY\x07\xdfw\xd4\xa8d\xaf1I\x81\x96B9\xbd\xff\x00\xdcT\x1e2\xf4bzG\x9bo\xb6\x13l\xd6H\x92K\xa8\xd1\xca\x9e\xdd\xbeh4\x04\xc4\x92\x9c\x8d\xc9\x87\xc9d\xdf\x10\xa1\xa0\xec\x96\xe7\x85\xe7\x1f\xa2\x86R\x98\xf48\x07\x90\xfb\xa4)<D\x82\xf4\x80P\xd0v?\xc5M\xef$8\xaf\x03\x90\xd1\xc2\xf7\xca\xf1"\xeb\xd44\x12\x18\xb0Q$zrg\xdfD\xdbY\xd5jl\xcc%?\x0c$\xae\xa7h%Oe\x82V\xc6\x19\xf5q\xcd%\xf4\xcd\xe5t\xf99\xa7ia/pkZ\\\xe3\xa3Z\x0b\x9c{\x83Fd\xa5\x19\x0c\xc3\x85\x17h\xebx\x85%\xbb7)\xf6KO\xc4+\xbe\x0b\xb0U\xf2\x00x"1\xd6g\x06\x1f\xf6\xe6\xe1\xe6\x15\xb6\x87\xd1\xac\xa3\xf9\x951\xb7\xb9\xacs\xbee\xcd\xfa#\xb5\xf6w\xe5\xf4c/\xd9\xba\x91\xfe\x9d\xfc\x08*,\xb8L\xed\xd6\x19?\xdaO\xd1}\x17I\xb0\x94\xe3\'T\xc8Opc~F\xeaG\xff\x00\x0c\x88{\x15\x0e\xfe\xb6\x87}\x08]\xb8\xfd\x9d\xf9\xfe\x8c\x03\x04\x94\x86\xee\x90C\x98n.\x08;\xb7\xd3\xc2\xff\x00\xdc\xa6\xd74\x1e\xd0\xd3O\x80\xeb\xcf/\xa2\xd6v\x83`&\x92"#1=\xe0\x874\xdfp\x9eD\x1b\x8d\x08\'\x9e\xb6T\n\xfd\x91\xaf\x8d\xa4II5\xbe\xe3L\xa3,\xefx\xf7\xad\xccy\xa9d\x95\xf4W\x15\xf7\xb6S*Yt2h\xac\x8e\xd7RI\x1f\xf3\x18\xf8\xc9\xff\x00\xf4k\x98O\xfb\x80CfbHz/\x92v\rJ\x0eNH\xc4\xc2\xd0\xbb2\xbd\xcb8\xa7\xa0)\x82\x97\x19\\\xd7@\x97\xaa&\xc0\xdb\x93~J\xc3\x86\xb7\x8bEQ\x06W\xe1\x99\x99}w\xe1py\xdd\x1f\xf8\xb8\xd9\xdf\xa6J\xb5\x0c\x96(\xae\x19\x88>\t\x1b+5i\x06\xc4\x9d\xd3c\xa3\xed\xabN\x84s\x19%OL\xad-\xc8\x01\xa5k;\'\xb5\x86\xa2\x99\xd1\xcaI\x9a\x06\x17\x13\xab\xa5\x89\xa3\xdb\x1c\xcb\x9b\xf6\xb5\xf7\xbd\xe5\x9dm\x16\x1a\xd8\x9e\x1f\x15\xcc\x13\x03$.\xfb\xb7\xedF\xe3\xef\xb0\xf6H\xee\x07B\x14L:\xbaHdd\xb18\xb2F\x10\xe6\xb8j\x0f\xe69\x11\xcc\x14rB\xb5\xa6K\x1d\xb8\xad\xa2Y\x92\xfey\xfcR$e\xb3G\xb1\xbaX\xdf\x1bk\xa9\xda\x1b\x0c\x87vX\x9b\xa5<\xfa\xb9\x83\xa4n\xd5\xbe6U\xda\x8a\x8b\xe4\xa8Lz\t\x02\x92f\xe8\x83\x07)Q=sAL\x94\xe7$\xf1Tw\xbd\'}.\x83\xb2C\xa4Il\x89\x8d\xf4\x9d\xfc\xd7h\x1b\'\xb5\xcb\xdb\xa6!r\xf6I\x124:c\x85\xc9ML\xc6\x9e.J\xd0\xc9\x9cJ\xe5\xe5\xd7%\t\x08X&\x1eR\x9cWS\xc7\xbcl3\'@3\'\xc0+\x90\x1f\x85\xb6\nF\xf5\x82/\x85l}t\xf6\xe1\xd3\xbd\xad\xf7\xe5\x06&\x0f7f|\x81Z\x06\xce\xec\x044\xe4IRD\xf2\x0c\xda\xdb\x1e\x13O[\x1f\xe6\x1e\xf7e\xdc\x92\xadO\xb2\x93\x15ESdv\x1ez\xbb=\xe7\x83\x01\xb1\xe2\x11\xdax\xff\x00\xb4\xd3\xa8\xfb\xc7.\x97[\x0e\xcf\xe0T\xb4M\xdd\x860\xd2Gi\xe7\xb5#\xff\x00\x13\xce~C.\xe4\xc3\xab\xac\xa3M^y,\xb5\x9d\x1a\xe3\xc7,\x8e\xc4\x00\xd1C\xa8\xc4I\xc8 \x8d\x90\x9f\xdf\xcdN\x89\x87\xc3\xea\xa7\xcd\xd1N\t\x0b\x8e\xa5\xcd7-\'\xbb\x97\x9a\x9c*\xc9\xe8<\xd0\x1a\xf8\xc8\xd0\x91\xe6\x86\x89\x08\xe6Tk3\x97\xad\x16\x9cJ\x96\xcb\x90\xc4\x1c9\xdf\xcd>\xdc`\xf3T\xe6\xe2\'\xaaK\xab\x8f2\x87\xf25\xe8\xef\xe3o\xd9o\xae\xc4\xa2\x91\xa5\x93\x06\xb9\x8e\x04\x16\xbc\x074\x83\xc8\x87y*]_\xa3\xfc6g\xee\xb5\xae\x84\xbbGG#\xb7A:v]q\xdc\x97\xeb\x97MK\x88\xd8e\xa8\x1f1\x9ae\xe4\xbf\xb0\xff\x00\x17\xf4U6\xa7\xd1\x15D\x0c|\x94\xf36p\xd0]\xb8ZY)\x00\\\xee\xda\xe1\xc7\xbb+\xf2\xcd=\xe8\x9b\xd1\xd3*Z*\xeb\x1b\xbd\x11?\xc2\x88\xdc\t,l^\xff\x00\xb9q`9\xe7\xcb[\xf6\'\xb5mcK\x9c@\xca\xe7\xe1twd,)\xa1\xddm\x9b\xc2\x8c\x8b\x02@\xbbA\xb5\xf4\xe6\xb7FU]#\x1eL\x0e{d]\xb8\xc2\xa9\x05\x1b\xe2|\x11p\xc4o \x065\xbb\xbb\xac$n\x10;\'-B\xf9V\xeb\xe9\xfd\xbd\x97~\t\xa3$\x8d\xe8\xde\xdb\xf4\xbbH_6\xd3\xe1\xb2>\xdb\xad%>;\xdbd\xf2ciN\x88\x81\xea\\5\x17\x16(\xfd\x06\xc5\xca\xfc\xde\x08\x1d\xc1\x1e\xa7\xd8\x08\x1c,\xe7H\xd7i\xa8\xd7\xc0\x8f\xdd\x8a\xaf\x1d\x93\xfc\xa4\xa9ax\x8bZ\xd7C3L\x90<\x82\xe6^\xcek\x80\xb0\x96\x17\x1fb@2\xe8\xe1\x91\x1a\x10\xdd~\x00\xe6\xb4\xcdN\xe1Q\x08\xcc\xbd\x80\x87\xc6?\xef\xc5\x9b\xa2\xd0\xe7\x9bO\'\x15e\xab\xf4oS{\xc0Z\xf6\xf4y\xb3\xbeA\x0b\x9bg\xabid\x0f\xbf\x01\xc3I\x04\xac`\x17\xfb\xdb\xc0\xf9Y\x1d5\xecF\xd3#l\x960\xd8ds&\xce\x9eq\xc3\x99\xba\x8b}\x99-\xd5\xa7?\x0b\x8eh\xd4\xfe\x8e*7\xe4\x0c{\x1c\xd6:\xc0\x8b\x92A\x17i> \xe4y\xa8\xf3\xcb\x0c\x8d>\xb5\x1be\x94\xff\x00\xabL\xdfW#;\x8d\xf7[rO\x11\x15\xfe\xf2?\x81m\xbb\xa0,k\xa2kad|;\x02\xe7\xc9\xb8\r\xc0{\x9fm\xe09\x11kx%\xaaIi0\xa8o\xda3\xecG\x0e|/,x\xcc&XU\xebn\xe8\x1d$\x82\xa2&\xef\xc4\xf6\x875\xcd\x17\x04g\x9d\x950\xd9Y\xcbI2*\x93m\r96R\xe4p\n;\xa4S\x18\xf5\xceIk\x92IJhD\xe2K_`\x9b\xdf\xb9M=\xe9P\x0c\xd2\xe8;&\xc2\x94\xe7$\x12\xb8\x94\x8cq\xcb\xae^\x05\xc8\x1ck\x98/\xa3\x9a\x18l\xe9\xb7\xa7x\xf7\xce\xecw\xee\x8d\xba\x8f\xc4J\xb5\xd3M\x04#v&1\x80r\x8d\xad`\xff\x00\xd4\x05Z}[\xdc3%G\x92\xa2\xda\x9f\x9a\xf3\xeb\xc9l\xf4\xa7\xc6\x94Z&\xc5\xc7_\xdf\xee\xca$\x95\x85\xd9\x05ZuQ\xbe\xbf\xbf\xdd\x93\x8c\xc4H\xe8\xa5\xf3o\xd9_\x85/A\xa6\xdc\x8e\xa9\xc6\x0bk\xfb\xf2B\x99\x88;\xaf\xc5I\x8e\xa7{Su\xca\x91\xcd0\x83j\xda\xdeI\xe6\xd7\x92\xa0\xee\x03\xa2\xe8\xdc\x01\xb2\xeeL\x1cQ*\xb2`\x05\xde\xeb\x0e\xa7\x92\xaeT\xd7\xc2\x0ffx\xc8\xefpV\xbaI\x80\xd6\xc7\xf2\xf0F\xa8\x9bN\xec\x8cQ\x9e\xfd\xc6\xde\xfa\xebd\xff\x00\x12\xbf\xb0,\x8e>\x8c\xc2\\R\xed.cK\x85\x89\xb8\xd0\xdb\xdd<\xcd\x90)6\xb9\x9d\x1f\xf0\x07\xf3[F5\xb3\x11:\x07\xee\x0b<\x82\x18[\x95\x9cn\x1b\xf3\xb2\xc9?\xfa\x7f\x13&\xc5\xb0\x0f\xbd\xc5\xcb\xe0\x1aO\xc9V<U\xea\x81^_\xfcA\xd1m|d\xe7v\xfe/\xf0\x95Y\xb5\x90\x81\x93\xb7\xbc\x15\x93f=\n\xcc\xe9\xdd\xeb\xf25\xb1G\xbba\x0b\xaee\';o\x10\x0b\x1a49_<\xba\xadg\x0c\xd9l>\x95\xa1\xb1R\xc2\xdbs,\x0eq\xef/u\xc9\xf8\xab\x7f\x13\x19\x17\xe7d\xf4\xb4f>\x8a\xa08\x83\xdfQ;C\xa2\x85\xc1\x91F\xec\xda\xe9,\x1c\\\xf1\xa3\xb7F\xed\x81\xca\xee\xbf \xb6\t\xddf\xf4\t\x97I\x034c[\xf8@o\xd1\x03\xc6\xf1\xc0\x01\xb1\xc9\x1a\xb8\xc6\xb4\x84SyktWv\xde\xa8\x86<\xb7_\xc9U\xb06\xc2\xc6\xf6Z\x1eo\xa8#p\x1e\x85\xfc\xff\x00\xa4\x14?mq\xd0\xe6\x88\xc9\xfec\xb7r\x17\xbbE\x8b\xb2\xe7\xc8y\xa5\xe0\xf4\x93\xd4\xb0\x86\x9e\x04M\xb3G9\x1f\xd4_F\x01\xdd\xd7\x92\xef\x12\xbau\xfb;\xca\xe9\xa9\xfd\x7f\xd8b|N\xce\x0c\xbb\x9c\xf3\xec\xc1\x0bn\xf2-\xcfS\xbb\x9e\xa7-.\x02%A\x86V<\x7f\xa7J\xcc\xb5\xfe4\xe7\xc4\x02\x18\xd3\xa7\xda>\x0b\xdc\x07\tm3N\xed\xb7\x9d\xed\x1eg\xc4\x9c\xcf\x9a7\x04\xebl6\xd7}\x1824\x9e\x93\xd9\x9cm\xde\x0f\x89\xc0\x0c\x8c\x9d\xf3\xc1\xcc\xb3\xb0\xf6\x0e{\xece\xb2\xef\xcdg#\x10\x92\xf7\xde\xcc\xf3\xb3I>v_K\tU\x1bk\xbd\x1eCQy)\xb7b\x97R\xdd#y\xef\x03\xd9=\xe1\n\xc7\xb3\xa3.\xbd\x99K1i=\xe0|\x9b\xfa\'?\xea\x8f:\xdb\xe0\x14\\K\r\x96\t\x0cs0\xb1\xe3\x91\xe9\xd4\x1d\x08\xef\n0Px\xe7\xf4hV\xcd[\xd1^0\xc7\xbf\xd4\xe5\xf6$\xdet@\xe8\xc9\x00.{\x07F\xb9\xa0\x90:\xb4\xf5G6\x9f\xd1\x9c\x13]\xd1\xf6\x1f\xd5\xb9|G5\x8f\xe0\xb5\xcf\x8aFH\xc3g1\xcd{|ZA\x03\xe2-\xe6W\xd3\x14\x95\xad\x966J\xcffF5\xed\xf0x\x0e\x1fU\xaf\x05\xedq\x7fFO"5\\\x97\xd9\xf3\xb6=\xb0\xd5\x94\xe4\x9d\xce#G6\xebn\xf0\xab\x0em\x8d\x88\xb1\xe6\n\xfa\xc6V5\xd98]V\xf1\xed\x82\xa5\xa9\x06\xec\x01\xde\xf0\xc8\xfcS\xd6%\xf4Nr5\xec\xf9\xd7u%\xceZ\x06?\xe8\xbax\xaeav\xf8\xf7]\x91\xf8\xaa5f\x1f$N\xdd\x95\x8ea\xef\x1fB\xa2\xe1\xafeU\xa7\xe8\x8c\xd0\xa5F\x13L\t\xe0\x91\x8e\x85]x3H%8\xc4\xa3\x0f\x05\xc97\\\x80M&LD\xdb-\x13\x02Bs*0#\xf7\xf0Kl\x8b\xc0\xed\x9fA\xd2%_\xf7\xf9/C\xee\xa3\xf1\x02\xee*d\x81\xb2Iz\\3\x91\xcdA2%\xb1\xe8\xe8\r\x86!\xad6\xf0J}E\xd0\x86Md\xf7\x1d\x06\x98\x16\x82\xf4\xb5\x86\xf9\x94n\x8a\xa4\xebuR\x8aDR\x8e\xb2\xc3Tb\x9c\xbe\xce\xb9\xd9s\xa6\xc5\xbd\x90\xe3\x93\\\x1d\xe64\x1f\x9f\x92.1\xc6\xac\xec\xd5\xf7\xa6\xdd\x88;<\xd5\xd7\x95K\xd1\x17\xe3M\x1a\x1b\xf1\xf6\xebt2\xaf\x1f\xbd\xf3TikOT\xcc\x95\xbd\xe9+\xc9\xba\x1a|x\x92\xc5_\x8d\x93\xcdV\xeb\xb1G8\x91u\x12\xa2\xa4\x9c\xd4\x10K\x8ef\xc3\xe6s\xd1\x08\x8a\xb65\xe4\x88[\x1d\xa5\xa2\x12?x\x8f\xc4\xeea\xb7\xbd\x87El\x8ap\xd0\x03@\x00\x0b\x004\x01W\xe1\x98\x01\xd9\xc9H\x8e\xa8\xaf[\x0c,k\xfb<l\xf9\x1eG\xfd\x07\xbdk\xbd?\x1c\xc8\x0cuWO\xc51Z9\x19\xf8\x87\x997zr:\x8eH<U\t\xf1T:\'T/\x12F/\x86\xd3\xd53\x87;\x03\x87#\xa3\x98z\xb1\xdc\x8a\xcb6\xa7`\xe6\xa6\xbc\x91^hF{\xc0v\xd8>\xfbF\xa3\xef\x0c\xbc\x16\xa0\xc9\xdaT\x96N:\xa0\xd2\xa0\xcd9\xf4|\xfb\x10\xd1m\x9e\x8c1>%\x10a70\xbc\xb3\xc1\x8e\xed\xb3\xcb77\xfaP\xad\xa2\xd8xg\xbc\x90\x11\x0c\xa72\x00\xfe\x1b\xcf\xdeh\xf6Ox\xf8!{\x16\xe9\xa8\xaa\xf83F\xe6\t\xec\xce\xad\xdem\xcb\x1c\xd7\x0c\x9c=\xa1\x97\xbc\x14\xe58\xbf\xe8\xad\xb5q\xfd\x9a\xd3dJ\xe2\xa1\xec\x95+\x88\xb5l\xc9\xa0\x87\x16\xfa\xa1\x98\xae\t\x04\xed-{\x01\xbfP\x13\xbcU\xdcR\x8e\xce\xd1\x96\xed7\xa3R\xcb\xbe\x98\xff\x00A\xd3\xc8\xf2Y\xe5];\xe3qc\xdaZ\xe1\xc8\xfe\xf3_H\xban\xaa\xad\xb5\xdb-\x15S\t\x02\xcf\x19\x87\rB\x9dcO\xd0\xf3m{1\x16\xa7\xdaR\xab\xa8\xdf\x03\xdd\x1b\xc5\x88\xf9\x8e\xa1G/Y\xda4&;\xbc\xb96\n\xe4\x02\\}`\xe8\x94\xc9\xbf\xc2\x87t\xa0\xe5\xe4qG\xb7\xc8\x9b\xc4)bU\x04\xc9mM\xbb\xee\xbd\x8e\xa9\x87G7\xe2\x10\xe2\xc1\xcd\x13\x04\x89\xd69C\x0e\xe8o\xf3Jk\x8a\x1a\x1bd\xed\xe4\xb0T\x0e"q\xb2\x95\xda8\x9c\xd9\x08NGS\xde\xa0\x89\xd3\x91\xcc9\x84\x06L.\xd9n\x13r\xc8\xa2\xc7.Y\x05\xe1\x17\xd75>=\x8c\xe8Y\x94\x9d>+\xd6\xb4j~%B\xac\xc4\x1b\x1e\xba\xf2\x03S\xfa!\x158\x9b\x9f\xaeC\xa0\xfc\xfa\xab\xe3\xc3U\xfe\x19\xf2g\x99\xff\x00B\xd5u\xa0\xe4\xdc\xfb\xff\x00E\x1e9;\xd0\xc6\xce\x9cmB\xdb\x12\xa1i\x1e~Kv\xf6\xc2\xcc\x9c\x8ei\xf8\xaaP~"u\xb2\'\xe4O\x88j)\xd4\x96\xcay\x14\x05\x92\xf7\xa7\x84\xdd\xe8\xab\x03\x92\xc0\xc9\x8f4\xe3\'\xea\xab\xec\xa9wT\xf0\xa9r\xa2\xc8#\x82\xc0\xda\x94\xfb\'(\x03j\x8a\x93\x05X\xea\x99d\x15\xc1a\x86\xa7\xaa\x94\xca\x8f\x92\x03\x1dH<\xd3\x82~\xf5Ei\x88\xe4>j\x82\xf0\xcd\xde\x82\x8a\x9e\xf4\xf0\xaaTT\'\x10\xa0\xa8J\x15(;\xab\x12=k\xbd\x1e@\xe2\x18uE\xd2\x05B\x14*\x82I\xac\xb2\xeeGq+\xde\x910Q#8\xac\x1d\xa6\xe7\x971\xcc,\xb8\x15\xb7\xd5J$c\x9b\xd4,o\x11\xa5\xe1\xca\xf6t9x\x14\x97\xa7\xd9H\xeb\xa1\x80\xb9r\xe4\x9a\x187U^\xc6\x1c\xeeOA\xfa\xa8\x12b\xcfw\xb2\x03~g\xe2W\xab\x96lx\xa7\x8af\xac\xb9\xaf\x93[#\xbaG\x1c\xdcK\xbcJSlW.V#\xec\xf5\x86\xc7,\xbc2R\x1bX\xf1\xa3\x9d\xf1\xbf\xd5r\xe4\xad\'\xec)\xb5\xe8tb2\xfb\xdf\x10\x14\xb81g\x0fh\x02;\xb2?\xe5r\xe57\x8a\x1f\xd1I\xcbk\xec\x9fO\x881\xc6\xd7 \xf7\x8f\xd1Mk\xac\xb9r\xc7\x9b\x1a\x87\xd1\xbf\xc7\xc8\xedvN\x89\xb7\xcdC\xc5k\x84b\xc3\xda:t\xf1?\xa2\xf1r\x96)Uze3\xd3\x98m\x15\xe2\xe3{\x92I\xe6JR\xe5\xcb\xd1<\xb1l\x0b\xd5\xcb\x920\x8e\x8d\x12\xda\xf5\xcb\x90\t\xee\xf2\xf1\xb2\x9e\xab\x97.8u\x95\x05:g\xf2^\xae\\\x01l\x9f\xbdH\x8a\xa4\xae\\\x8e\xce%\xc7T\x9emZ\xe5\xca\x88\x9b\x16\xda\xb4\xb6\xd5\x95\xcb\x93\xed\x8b\xa1f\xb56\xe9\xd7.L\xa9\x8b\xa1>\xb0\x9b\x92\xa1r\xe5\xcd\x85!qN\xa8\xdbV\xcf\xe3_\xa8^\xaeM/h\x0c\te\xcb\x97"\x03\xff\xd9'  # داده‌های باینری تصویر امضا را اینجا قرار دهید

# مثال استفاده
create_medical_certificate("علی", "رضایی", 3, signature_data)